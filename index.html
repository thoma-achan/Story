<!-- Updated index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Verification</title>
    <link rel="icon" href="img/title1.png" type="image/png">
     <link href="css/style1.css" rel="stylesheet"> 
 </head>
<body>
<div class="container">
    <h1>Password Verification</h1>
    <form id="password-form">
        <label for="username">Enter Username:</label>
        <input type="text" id="username">

        <label for="password">Enter Password:</label>
        <input type="password" id="password" required>

        <button type="submit">Verify</button>
        <a href="https://github.com/login/oauth/authorize?client_id=Ov23liCop5x3mhEIiYjd&scope=repo">Login with GitHub</a>

    </form>
    <p id="message"></p>
</div>
    <script>
        // Assume we are getting the code from the URL parameters
const code = new URLSearchParams(window.location.search).get('code');

// GitHub's OAuth token endpoint
const tokenUrl = 'https://github.com/login/oauth/access_token';

const clientId = 'Ov23liCop5x3mhEIiYjd';
const clientSecret = 'b4a8c9fe69ce2abbb5c0283b551096bf93cf5898'; // Never expose this in client-side code!

// Send a POST request to GitHub to exchange the code for an access token
async function getAccessToken(code) {
    const response = await fetch(tokenUrl, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
        },
        body: new URLSearchParams({
            client_id: clientId,
            client_secret: clientSecret,
            code: code,
        }),
    });

    const data = await response.text();

    // GitHub returns the access token as a URL-encoded string
    const params = new URLSearchParams(data);
    const accessToken = params.get('access_token');
    console.log('Access Token:', accessToken);

    // Store the access token for later API use
    localStorage.setItem('githubAccessToken', accessToken);
}

// Call the function if the code exists in the URL
if (code) {
    getAccessToken(code);
}
const accessToken = localStorage.getItem('githubAccessToken');

async function fetchUserData() {
    const response = await fetch('https://api.github.com/user', {
        headers: {
            Authorization: `Bearer ${accessToken}`,
        },
    });

    const userData = await response.json();
    console.log('User Data:', userData);
}

fetchUserData();
    </script>
<script src="js/login.js"></script>	
</body>
</html>
